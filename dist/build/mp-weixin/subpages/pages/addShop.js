require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpages/pages/addShop"],{"0695":function(e,t,n){"use strict";(function(e){n("6cdc");o(n("66fd"));var t=o(n("af3d"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"0c88":function(e,t,n){"use strict";var o=n("3fc7"),i=n.n(o);i.a},"3fc7":function(e,t,n){},af3d:function(e,t,n){"use strict";n.r(t);var o=n("cb5d"),i=n("b945");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("0c88");var s,r=n("f0c5"),c=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"3abc2ef8",null,!1,o["a"],s);t["default"]=c.exports},b945:function(e,t,n){"use strict";n.r(t);var o=n("f95f"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},cb5d:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},a=[]},f95f:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("0c3f")),i=s(n("2018")),a=n("b703");function s(e){return e&&e.__esModule?e:{default:e}}var r,c=function(){n.e("components/topBar").then(function(){return resolve(n("ad1a"))}.bind(null,n)).catch(n.oe)},u={components:{TopBar:c},data:function(){return{latitude:null,longitude:null,address:"",markers:[],gender:1,elseMsg:!1,elseMsgs:!0,IMG_BEFORE_URL:a.IMG_BEFORE_URL,array:["美食","玩乐","购物"],form:{leixing:"",leixings:"",name:"",city:e.getStorageSync("location"),houseNumber:"",titleAddress:"",address:"",backSide:"",backSides:"",phone:"",yingye:"",remark:""}}},computed:{isIpx:function(){return this.$isIpx},navHeight:function(){return e.getStorageSync("navHeight")}},onLoad:function(){this.getUserLocation()},methods:{chooseImg:function(){var t=this;e.chooseImage({count:1,sourceType:["camera","album"],sizeType:["original","compressed"],success:function(e){var n=e.tempFilePaths[0];t.$comfun.uploadImg(n).then((function(e){var n=JSON.parse(e.data);console.log(n,"444"),t.form.backSide=a.IMG_BEFORE_URL+n.data.url,t.form.backSides=n.data.url}))}})},getUserLocation:function(){var t=this;e.getLocation({success:function(e){(e.errMsg="getLocation:ok")&&(r=new o.default.BMapWX({ak:"o9FZ3zhus8bwG08ros15iWXqehXp7zAE"}),r.regeocoding({location:{latitude:e.latitude,longitude:e.longitude},success:function(e){console.log(e,"4444"),t.latitude=e.originalData.result.location.lat,t.longitude=e.originalData.result.location.lng,t.address=e.originalData.result.formatted_address,t.markers[0]={longitude:e.originalData.result.location.lng,latitude:e.originalData.result.location.lat,width:23,height:25,title:e.originalData.result.formatted_address,iconPath:"http://www.mingtongxa.com/wanzhuan/addressto.png"}},fail:function(e){},complete:function(e){}}))}})},openMap:function(){var t=this;e.chooseLocation({success:function(e){console.log(e,"55555"),t.form.houseNumber=e.name;var n=t.formatLocation(e);t.form.titleAddress=n.REGION_PROVINCE+n.REGION_CITY+n.REGION_COUNTRY,t.form.address=e.address,console.log("位置名称：",e),console.log("详细地址："+e.address)}})},formatLocation:function(t){var n=/^(北京市|天津市|重庆市|上海市|香港特别行政区|澳门特别行政区)/,o=[],i={REGION_PROVINCE:null,REGION_COUNTRY:null,REGION_CITY:null,ADDRESS:null};function a(e,o){n=/^(.*?[市]|.*?地区|.*?特别行政区)(.*?[市区县])(.*?)$/g;var i=n.exec(e);o.REGION_CITY=i[1],o.REGION_COUNTRY=i[2],o.ADDRESS=i[3]+"("+t.name+")"}return(o=n.exec(t.address))?(i.REGION_PROVINCE=o[1],a(t.address,i)):(n=/^(.*?(省|自治区))(.*?)$/,o=n.exec(t.address),i.REGION_PROVINCE=o[1],a(o[3],i)),console.log(i,"555555"),this.sheng=i.REGION_PROVINCE,this.shi=i.REGION_CITY,this.qu=i.REGION_COUNTRY,e.setStorageSync("district",i.REGION_COUNTRY),e.setStorageSync("street",i.ADDRESS),this.getQuNumber(),i},getQuNumber:function(){var t=this;i.default.map((function(n){n.cities.map((function(n){n.name==t.shi&&e.setStorageSync("quhao",n.id)}))}))},chooseGender:function(e){this.gender=e},changeElse:function(e){1==e?(this.elseMsg=!0,this.elseMsgs=!1):(this.elseMsgs=!0,this.elseMsg=!1)},bindPickerChange:function(e){this.form.leixing=this.array[e.detail.value],this.form.leixings=Number(e.detail.value)+1},gotoTijiao:function(){var t=this;if(this.form.leixing)if(this.form.name)if(this.form.name)if(this.form.city)if(this.form.city)if(this.form.backSides){var n={categoryId:this.form.leixings,categoryName:this.form.leixing,city:e.getStorageSync("quhao"),cityName:this.form.city,name:this.form.name,remark:this.form.remark,address:this.form.address,area:e.getStorageSync("district"),imgUrl:this.form.backSides,street:e.getStorageSync("street"),phonenumber:this.form.phone,useTimeShow:this.form.yingye,x:e.getStorageSync("longitude"),y:e.getStorageSync("latitude")};e.showLoading(),this.$api.addShops(n).then((function(n){e.hideLoading(),200==n.code?(e.showToast({title:"提交成功",duration:1e3}),setTimeout((function(){e.navigateBack()}),1500)):t.$comfun.Toast(n.msg,"none")}))}else e.showToast({title:"请上传门脸照片！",icon:"none"});else e.showToast({title:"商铺位置不能为空！",icon:"none"});else e.showToast({title:"城市不能为空！",icon:"none"});else e.showToast({title:"商户名称不能为空！",icon:"none"});else e.showToast({title:"商户名称不能为空！",icon:"none"});else e.showToast({title:"商户类型不能为空！",icon:"none"})}}};t.default=u}).call(this,n("543d")["default"])}},[["0695","common/runtime","common/vendor"]]]);